<!doctype HTML>
<html>
<head>
  <meta charset="utf-8" />
  <base href="http://localhost:3000/" />
  <script src="https://unpkg.com/redux@3.7.1/dist/redux.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/incrementaldom/0.5.1/incremental-dom.js" defer="defer"></script>
</head>
<body>
  <link key="3912f" rel="stylesheet" href="app.css" type="text/css"  /><script key="2ee68" src="https://unpkg.com/monaco-editor@0.7.0/min/vs/loader.js" type="text/javascript" defer="defer" ></script><script key="24ee3" src="https://www.hellorust.com/demos/bundle.js" type="text/javascript" defer="defer" ></script><script key="97254" src="app.js" type="text/javascript" ></script><div key="9a2eb" class="topLayout" ><div key="c45d6" class="top" ><select key="aa57f.fd3af" id="activeWorkspace" onchange="event_ca5a4x_change(event, {&quot;id&quot;: event.target.value, &quot;workspaces&quot;: [{&quot;id&quot;: &quot;todomvc&quot;, &quot;name&quot;: &quot;todomvc&quot;, &quot;description&quot;: &quot;The famous TodoMvc demo&quot;, &quot;demo&quot;: true, &quot;files&quot;: [{&quot;id&quot;: &quot;todomvc/app.ism&quot;, &quot;path&quot;: &quot;app.ism&quot;, &quot;name&quot;: &quot;app.ism&quot;, &quot;caption&quot;: &quot;ISM&quot;, &quot;language&quot;: &quot;isymtope&quot;, &quot;main&quot;: true}]}, {&quot;id&quot;: &quot;playground&quot;, &quot;name&quot;: &quot;playground&quot;, &quot;description&quot;: &quot;This application&quot;, &quot;demo&quot;: true, &quot;files&quot;: [{&quot;id&quot;: &quot;playground/app.ism&quot;, &quot;path&quot;: &quot;app.ism&quot;, &quot;name&quot;: &quot;app.ism&quot;, &quot;caption&quot;: &quot;ISM&quot;, &quot;language&quot;: &quot;isymtope&quot;, &quot;main&quot;: true}, {&quot;id&quot;: &quot;playground/app.js&quot;, &quot;path&quot;: &quot;app.js&quot;, &quot;name&quot;: &quot;app.js&quot;, &quot;caption&quot;: &quot;JS&quot;, &quot;language&quot;: &quot;javascript&quot;}, {&quot;id&quot;: &quot;playground/app.css&quot;, &quot;path&quot;: &quot;app.css&quot;, &quot;name&quot;: &quot;app.css&quot;, &quot;caption&quot;: &quot;CSS&quot;, &quot;language&quot;: &quot;css&quot;}]}], &quot;id&quot;: event.target.value})"><option key="aa57f.cf774.0.353a7" value="todomvc" >todomvc - The famous TodoMvc demo</option><option key="aa57f.cf774.1.353a7" value="playground" >playground - This application</option></select></div><div key="0399b" class="main" ><div key="7d46b" class="splitScreen" ><div key="d5579" class="splitEditor" ><div key="c3a77.8bc1c" class="editorWrap" ><div key="c3a77.0b4ae" class="editorButtons" ><ul key="c3a77.3c2a1.bde7e" class="editorFiles" ><li key="c3a77.3c2a1.e6bb7.0.73de5" class="isActive" ><a key="c3a77.3c2a1.e6bb7.0.0d1b8" href="#" class="btn btn-small" onclick="event_438acx_click(event, {&quot;name&quot;: &quot;app.ism&quot;, &quot;name&quot;: &quot;app.ism&quot;, &quot;path&quot;: &quot;app.ism&quot;})">ISM</a></li><li key="c3a77.3c2a1.c139c" class="updatePreview" ><a key="c3a77.3c2a1.873b7" href="#" class="btn btn-small" onclick="event_01c61x_click(event, {})">Update ></a></li></ul></div><div key="c3a77.0909c" class="editorMain" ><div key="c3a77.f0f0a" id="editorComponent" ></div></div></div></div><div key="5de60" class="splitPreview" ><div key="f10ed.34964" id="previewComponent" ><iframe key="f10ed.21a5a" id="preview" src="about:blank" ></iframe></div></div></div></div></div>

  <script>
    "use strict";

    (function(_global) {
    let Isymtope = _global.Isymtope = _global.Isymtope || {}

    function IsymtopeDriverIncDom(root, render, store) {
        this._root = root;
        this._render = render.bind(null, store);
    }

    ///
    /// For compatibility with IncDom's empty prototype objects.
    ///

    function Blank() {}
    Blank.prototype = Object.create(null);
    
    // let listeners = new Map();

    function markExisting(nodes) {
        nodes = 'string' === typeof nodes ? document.querySelectorAll(nodes) : nodes
        Array.prototype.slice.call(nodes).forEach(function(node) {
            IncrementalDOM.importNode(node);
            var data = node['__incrementalDOMData'];
            data.staticsApplied = true;
            data.newAttrs = new Blank();
        });
    }

    function classList() {
        return [].slice.call(arguments).filter(function(e) { return !!e; }).join(' ');
    }

    IsymtopeDriverIncDom.prototype.prepareExisting = function IsymtopeDriverIncDom_prepareExisting(nodes) {
        markExisting(nodes);
    }

    IsymtopeDriverIncDom.prototype.update = function IsymtopeDriverIncDom_update() {
        IncrementalDOM.patch(this._root, this._render);
    }

    // IsymtopeDriverIncDom.createDriverFactory = function IsymtopeDriverIncDom_createDriverFactory(opts, renderFunc) { 
    //     return function(store) {
    //         let render = renderFunc.bind(null, store);
    //         return new IsymtopeDriverIncDom(opts, render);
    //     }
    // }

    function createIsymtopeRouter(opts) {
        let history = opts.history = IsymtopeRouting.createHistory(window)
        let routes = opts.routes || {};
        let store = opts.store;

        return Isymtope.Routing.createRoutingMiddleware(routes, history);
    };
    
    function createStore(rootReducer, middleware) {
        return Redux.applyMiddleware.apply(null, middleware)(Redux.createStore)(rootReducer);
    };

    Isymtope.initialize = function IsymtopeDriverIncDom_initialize(root, render, rootReducer, routes, dispatchCurrentRoute) {
        dispatchCurrentRoute = !!dispatchCurrentRoute

        let history = Isymtope.Routing.createHistory(window)
        let routingMiddleware = Isymtope.Routing.createRoutingMiddleware(routes, history)
        let store = createStore(rootReducer, [routingMiddleware])
        let driver = new IsymtopeDriverIncDom(root, render, store)

        document.addEventListener("DOMContentLoaded", function(event) {
            // Mark nodes as existing
            driver.prepareExisting('*');

            // Subscribe
            let update = driver.update.bind(driver);
            store.subscribe(update);

            Isymtope.Routing.startRouting(history, store, dispatchCurrentRoute)
        });

        _global.Isymtope.store = store

        return store
    }

    Isymtope.IncDOM = IsymtopeDriverIncDom
}(window));
    (function(_global) {
    _global.Isymtope = _global.Isymtope || {}
    let IsymtopeRouting = _global.Isymtope.Routing = {}

    let baseUrl = !!document.baseURI ? new URL(document.baseURI).pathname.replace(/\/+$/, '') : ''
    let rootPath = baseUrl.length ? baseUrl + '/' : ''
    let mapRoute = href => rootPath + href.replace(/^\/+/, '').replace(/\/+$/, '')

    function createHistory(_window) {

        return {
            init: function(store, dispatchCurrentRoute) {
                dispatchCurrentRoute = !!dispatchCurrentRoute

                _window.addEventListener('popstate', function(event) {
                    store.dispatch({type: '@@redux-routing/replace', href: event.state});
                });

                if (dispatchCurrentRoute) {
                    store.dispatch({type: '@@redux-routing/replace', href: _window.location.pathname });
                }
            },
            update: function(action) {
                switch (action.type) {
                    case '@@redux-routing/navigate':
                        _window.history.pushState(action.href, null, action.href); break;
                    case '@@redux-routing/replace':
                        _window.history.replaceState(action.href, null, action.href); break;
                    default: break;
                }
            }
        };
    }

    function createRoutingMiddleware(routes, history) {
        var routes = Object.keys(routes).map(function(pattern) { return { regex: new RegExp('^' + mapRoute(pattern.replace(/\//g, '\/') + '$')), handler: routes[pattern].handler }; });

        return function(store) {
            return function(next) {
                return function(action) {
                    if (!/^@@redux-routing/.test(action.type)) {
                        return next(action);
                    }

                    var href = action.href;
                    var match = routes.filter(function(route) { return !!route.regex.exec(href); })[0];

                    if (match && match.handler) {
                        match.handler(href, store);
                    }

                    history.update(action);
                }
            }
        };
    }

    let navigate = href => ({ type: '@@redux-routing/navigate', href: mapRoute(href) })

    function startRouting(history, store, dispatchCurrentRoute) {
            dispatchCurrentRoute = !!dispatchCurrentRoute

            // Start routing
            history.init(store, dispatchCurrentRoute);
    
            _global._go = function(href) { store.dispatch(navigate(href)); };
    }
    
    IsymtopeRouting.createHistory = createHistory
    IsymtopeRouting.createRoutingMiddleware = createRoutingMiddleware
    IsymtopeRouting.startRouting = startRouting
}(window));
    (function(_global) {
    let util = _global.IsymtopeUtil = {};

    let toEntry = (obj) => [obj.id, obj]
    let orTrue = (func) => 'function' === typeof func ? func : _item => true
    let orSelf = (item, func, cond) => cond(item) ? func(item) : item
    let orMember = (func) => 'function' === typeof func ? func : _item => _item[func]
    let valueThunk = (func) => 'function' === typeof func ? func : () => func

    class IsymtopeUtilWrapper {
        constructor(m) {
            if (typeof m === 'undefined') {
                this.m = []
            } else if (Array.isArray(m)) {
                // Are all members objects
                let supported = m.every(e => typeof e === 'object')
                if (supported) {
                    this.m = new Map(m.map(e => [e.id, e]))
                    return
                }
            }

            this.m = m
        }

        map(func, cond = undefined) {
            let arr = Array.from(this.m);
            func = orMember(func)
            cond = orMember(orTrue(cond))
            let entries = arr.map(([_idx, _item]) => toEntry(orSelf(_item, func, cond)));
            this.m = new Map(entries);

            return this;
        }

        enumerateWithKeys() {
            let arr = Array.from(this.m.entries());
            let entries = arr.map((_item, _idx) => ([_idx, _item[1]]));
            this.m = new Map(entries);

            return this;
        }

        reduce(func, initial = undefined) {
            func = orMember(func)
            cond = orMember(orTrue(cond))
            let arr = Array.from(this.m);
            let entries = arr.reduce((acc, item) => orSelf(item, func, cond), initial);

            this.m = new Map(entries)
            return this
            // return this.reduceIf(func, initial);
        }

        reduceIf(func, initial = undefined, cond = undefined) {
            func = orMember(func)
            cond = orMember(orTrue(cond))
            let arr = Array.from(this.m);
            let entries = arr.reduce((acc, item) => orSelf(item, func, cond), initial);

            this.m = new Map(entries)
            return this
        }

        min(func) {
            func = orMember(func)
            let arr = Array.from(this.m);

            let res = arr.reduce((acc, [_idx, _item]) => {
                let v = func(_item)
                return (v < acc) ? v : acc
            }, 0);

            this.m = res
            return this
        }

        max(func) {
            func = orMember(func)
            let arr = Array.from(this.m);

            let res = arr.reduce((acc, [_idx, _item]) => {
                let v = func(_item)
                return (v > acc) ? v : acc
            }, 0);

            this.m = res
            return this
        }

        count(cond = undefined) {
            cond = orMember(orTrue(cond))
            let arr = Array.from(this.m);

            let res = arr.reduce((acc, [_idx, _item]) => {
                let v = cond(_item)
                return (!!v) ? (acc + 1) : acc
            }, 0)

            this.m = res
            return this
        }

        first(cond = undefined) {
            cond = orMember(orTrue(cond))

            let arr = Array.from(this.m)
            let entries = arr.filter(([_idx, _item]) => !!cond(_item, _idx))
            let first = (entries && !!entries.length && entries[0]) || []
            this.m = (Array.isArray(first) && first.length > 1) ? first[1] : first
            return this            
        }

        // Pipeline utilities

        addObject(values) {
            let arr = Array.from(this.m)
            let entry = toEntry(values)
            let entries = arr.concat([entry]);

            this.m = new Map(entries);
            return this;
        }

        setObject(values, cond = undefined) {
            let valueFunc = valueThunk(orMember(values))
            let condFunc = valueThunk(orMember(orTrue(cond)))
            let setValues = obj => Object.assign({}, obj, valueFunc(obj))

            return this.map(setValues, cond)
        }

        whereObject(func) {
            func = orMember(func)

            let arr = Array.from(this.m)
            let entries = arr.filter(([_idx, _item]) => func(_item, _idx))

            this.m = new Map(entries)
            return this

        }

        filter(func) { return this.whereObject(func); }

        removeObject() {

        }

        unique(func = undefined) {
            func = 'undefined' === typeof func ? 'id' : func
            func = orMember(func)

            let keys = new Set();
            let arr = Array.from(this.m)

            let entries = arr.filter(([_idx, _item]) => {
                let id = func(_item)
                if (keys.has(id)) { return false }
                keys.add(id)

                return true
            })

            this.m = new Map(entries)
            return this
        }

        get value() {
            return this.m;
        }
    }

    _global.__IsymtopeUtil = m => new IsymtopeUtilWrapper(m)

    let classes = obj => Object.entries(obj).map(([_key, _value]) => !!_value ? _key : undefined).filter(Boolean).join(' ')

    _global.__IsymtopeUtil__classes = classes

}(window));

    let routes = {};
    
      routes["/"] = { handler: function(path, store) {
                    store.dispatch({type: "WORKSPACEID.CHOOSEWORKSPACE", "id": "1czxy"});
            store.dispatch({type: "ACTIVEWORKSPACE.CHOOSEWORKSPACE", "id": "todomvc"});

      }};
    let root = document.querySelector('body')
    let rootReducer = createRootReducer()
    let store = Isymtope.initialize(root, render, rootReducer, routes, false)

    let wrap = window.__IsymtopeUtil;
    let classes = window.__IsymtopeUtil__classes;

    // Events
    
      function event_438acx_click(_event, props) {
        
          
                        store.dispatch({type: "ACTIVEFILENAME.CHOOSEFILE", "name": props.name});

          
                        store.dispatch({type: "EDITORCONTENT.LOAD", "name": props.name, "path": props.path});

          _event.preventDefault();
        
      }
    
      function event_ca5a4x_change(_event, props) {
        
          
                        store.dispatch({type: "LOADWORKSPACE.LOADWORKSPACE", "workspaces": props.workspaces, "id": _event.target.value});

          
                        store.dispatch({type: "ACTIVEWORKSPACE.CHOOSEWORKSPACE", "id": _event.target.value});

          _event.preventDefault();
        
      }
    
      function event_01c61x_click(_event, props) {
        
          
                        store.dispatch({type: "COMPILER.COMPILE"});

          _event.preventDefault();
        
      }
    // Reducers
    
      function workspacesReducer(state, action) {
          switch (action.type) {
            
              default: return state || new Map([{"id": "todomvc", "name": "todomvc", "description": "The famous TodoMvc demo", "demo": true, "files": [{"id": "todomvc/app.ism", "path": "app.ism", "name": "app.ism", "caption": "ISM", "language": "isymtope", "main": true}]}, {"id": "playground", "name": "playground", "description": "This application", "demo": true, "files": [{"id": "playground/app.ism", "path": "app.ism", "name": "app.ism", "caption": "ISM", "language": "isymtope", "main": true}, {"id": "playground/app.js", "path": "app.js", "name": "app.js", "caption": "JS", "language": "javascript"}, {"id": "playground/app.css", "path": "app.css", "name": "app.css", "caption": "CSS", "language": "css"}]}].map(_item => [_item.id, _item]));
            
          }
      }
    
      function activeFilenameReducer(state, action) {
          switch (action.type) {
            
              case "ACTIVEFILENAME.CHOOSEFILENAME": return action.id;
            
              default: return state || "app.ism";
            
          }
      }
    
      function activeWorkspaceReducer(state, action) {
          switch (action.type) {
            
              case "ACTIVEWORKSPACE.CHOOSEWORKSPACE": return action.id;
            
              default: return state || "todomvc";
            
          }
      }
    
      
      function listWorkspaceFilesComponent(props) {
                IncrementalDOM.elementOpen("ul", props.key + ".bde7e", ["key", props.key + ".bde7e", "class", "editorFiles"]);
        for (const _item of wrap(props.workspaceData.files).enumerateWithKeys().value) { 
fileLinkComponent({"key": props.key + ".e6bb7." + _item[0], fileData: _item[1]});
}
        IncrementalDOM.elementOpen("li", props.key + ".c139c", ["key", props.key + ".c139c", "class", "updatePreview"]);
        IncrementalDOM.elementOpen("a", props.key + ".873b7", ["key", props.key + ".873b7", "onclick", e => event_01c61x_click(e, {}), "href", "#", "class", "btn btn-small"]);
        IncrementalDOM.text("Update >");
        IncrementalDOM.elementClose("a");
        IncrementalDOM.elementClose("li");
        IncrementalDOM.elementClose("ul");

      }
    
      
      function editorComponent(props) {
                IncrementalDOM.elementOpen("div", props.key + ".8bc1c", ["key", props.key + ".8bc1c", "class", "editorWrap"]);
        IncrementalDOM.elementOpen("div", props.key + ".0b4ae", ["key", props.key + ".0b4ae", "class", "editorButtons"]);
        listWorkspaceFilesComponent({"key": props.key + ".3c2a1", workspaceData: query_workspace_data(store, store.getState().workspaces, store.getState().activeWorkspace), activeFilename: store.getState().activeFilename});
        IncrementalDOM.elementClose("div");
        IncrementalDOM.elementOpen("div", props.key + ".0909c", ["key", props.key + ".0909c", "class", "editorMain"]);
        IncrementalDOM.elementOpen("div", props.key + ".f0f0a", ["key", props.key + ".f0f0a", "id", "editorComponent"]);
        IncrementalDOM.skipNode();
        IncrementalDOM.elementClose("div");
        IncrementalDOM.elementClose("div");
        IncrementalDOM.elementClose("div");

      }
    
      
      function listWorkspacesComponent(props) {
                IncrementalDOM.elementOpen("select", props.key + ".fd3af", ["key", props.key + ".fd3af", "onchange", e => event_ca5a4x_change(e, {workspaces: props.workspaces}), "id", "activeWorkspace"]);
        for (const _item of wrap(props.workspaces).enumerateWithKeys().value) { 
workspaceOptionComponent({"key": props.key + ".cf774." + _item[0], workspaceData: _item[1]});
}
        IncrementalDOM.elementClose("select");

      }
    
      
      function listFilesComponent(props) {
                IncrementalDOM.elementOpen("ul", props.key + ".c605a", ["key", props.key + ".c605a", "class", "editorFiles"]);
        for (const _item of wrap(props.files).enumerateWithKeys().value) { 
fileLinkComponent({"key": props.key + ".156fe." + _item[0], fileData: _item[1]});
}
        IncrementalDOM.elementClose("ul");

      }
    
      
      function fileLinkComponent(props) {
                IncrementalDOM.elementOpen("li", props.key + ".73de5", ["key", props.key + ".73de5"], "class", classes({"isActive": (props.fileData.name == props.activeFilename)}));
        IncrementalDOM.elementOpen("a", props.key + ".0d1b8", ["key", props.key + ".0d1b8", "onclick", e => event_438acx_click(e, {name: props.fileData.name, name: props.fileData.name, path: props.fileData.path}), "href", "#", "class", "btn btn-small"]);
        IncrementalDOM.text(props.fileData.caption);
        IncrementalDOM.elementClose("a");
        IncrementalDOM.elementClose("li");

      }
    
      
      function workspaceOptionComponent(props) {
                IncrementalDOM.elementOpen("option", props.key + ".353a7", ["key", props.key + ".353a7"], "value", (props.workspaceData.id));
        IncrementalDOM.text(props.workspaceData.name);
        IncrementalDOM.text(" - ");
        IncrementalDOM.text(props.workspaceData.description);
        IncrementalDOM.elementClose("option");

      }
    
      
      function previewComponent(props) {
                IncrementalDOM.elementOpen("div", props.key + ".34964", ["key", props.key + ".34964", "id", "previewComponent"]);
        IncrementalDOM.elementOpen("iframe", props.key + ".21a5a", ["key", props.key + ".21a5a", "id", "preview", "src", "about:blank"]);
        IncrementalDOM.elementClose("iframe");
        IncrementalDOM.elementClose("div");

      }
    
      
      function tabsComponent(props) {
        
      }
    
      function query_workspace_data(store
        
          , workspaces
        
          , activeWorkspace
        ) {
                if (true) { return wrap(workspaces).filter(_item => _item.id == activeWorkspace).first().value; }

      }
    function render(store) {
              IncrementalDOM.elementVoid("link", "3912f", ["key", "3912f", "rel", "stylesheet", "href", "app.css", "type", "text/css"]);
        IncrementalDOM.elementOpen("script", "2ee68", ["key", "2ee68", "src", "https://unpkg.com/monaco-editor@0.7.0/min/vs/loader.js", "type", "text/javascript", "defer", "defer"]);
        IncrementalDOM.elementClose("script");
        IncrementalDOM.elementOpen("script", "24ee3", ["key", "24ee3", "src", "https://www.hellorust.com/demos/bundle.js", "type", "text/javascript", "defer", "defer"]);
        IncrementalDOM.elementClose("script");
        IncrementalDOM.elementOpen("script", "97254", ["key", "97254", "src", "app.js", "type", "text/javascript"]);
        IncrementalDOM.elementClose("script");
        IncrementalDOM.elementOpen("div", "9a2eb", ["key", "9a2eb", "class", "topLayout"]);
        IncrementalDOM.elementOpen("div", "c45d6", ["key", "c45d6", "class", "top"]);
        listWorkspacesComponent({"key": "aa57f", workspaces: store.getState().workspaces});
        IncrementalDOM.elementClose("div");
        IncrementalDOM.elementOpen("div", "0399b", ["key", "0399b", "class", "main"]);
        IncrementalDOM.elementOpen("div", "7d46b", ["key", "7d46b", "class", "splitScreen"]);
        IncrementalDOM.elementOpen("div", "d5579", ["key", "d5579", "class", "splitEditor"]);
        editorComponent({"key": "c3a77", filename: store.getState().activeFilename});
        IncrementalDOM.elementClose("div");
        IncrementalDOM.elementOpen("div", "5de60", ["key", "5de60", "class", "splitPreview"]);
        previewComponent({"key": "f10ed"});
        IncrementalDOM.elementClose("div");
        IncrementalDOM.elementClose("div");
        IncrementalDOM.elementClose("div");
        IncrementalDOM.elementClose("div");

    }

    function createRootReducer() {
      return Redux.combineReducers({
        
          workspaces: workspacesReducer,
        
          activeFilename: activeFilenameReducer,
        
          activeWorkspace: activeWorkspaceReducer,
        
          loadWorkspace: loadWorkspaceReducer,
        
          loadFile: loadFileReducer,
        
          editorContent: editorContentReducer,
        
          compiler: compilerReducer,
        });
    };
  </script>
</body>
</html>